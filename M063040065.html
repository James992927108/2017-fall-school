<html>

<head>
    <meta charset="utf-8" />
    <style type="text/css">
        #years,
        #months,
        #posts {
            cursor: pointer;
        }

        .archive_year {
            margin-left: 1em;
            font-size: large;
            font-weight: bold;
            cursor: pointer;
        }

        .archive_month {
            margin-left: 1em;
            margin-top: 0;
            margin-bottom: 1em;
            list-style-type: circle;
            font-size: medium;
            cursor: pointer;
        }

        .archive_posts {
            margin-left: 1em;
            margin-top: 0;
            margin-bottom: 1em;
            list-style: square url('http://www.webbossuk.com/admin/images/reply-arrow.png');
            font-weight: normal;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1 style="color: red;">題目</h1>
    <p>Voronoi diagram (divide-and-conquer)</p>

    <h2 style="color: red;">系級</h2>
    <p>資汛工程學系碩士班一年級</p>

    <h2 style="color: red;">姓名</h2>
    <p>鄧子奇</p>

    <h2 style="color: red;">學號</h2>
    <p>M063040065</p>

    <hr/>
    <div>
        <h1 style="color: red;">軟體規格</h1>
        <div>
            <h2 style="color: red;">輸入</h2>
            <p>以左鍵點擊畫布或依需求格式輸入。</p>
            <ul>
                <li>
                    <p>讀檔格式參考下列，分兩種，有註解和無註解。</p>
                    <a href="http://par.cse.nsysu.edu.tw/~cbyang/course/algo/vd_testdata.in">1 . 含註解</a>
                    <br/>
                    <a href="http://par.cse.nsysu.edu.tw/~cbyang/course/algo/vd_testdata.in">2 . 不含註解</a>
                </li>
            </ul>
        </div>
        <div>
            <h2 style="color: red;">輸出</h2>
            <p>可直接顯示於畫布上或依格式輸出至文字檔</p>
        </div>
        <div>
            <h2 style="color: red;">功能規格與介面規格</h2>
            <img src="img/main_window_info_1.png" />
            <p align="center">圖(1)</p>
            <img src="img/main_window_info_2.png" />
            <p align="center">圖(2)</p>
            <img src="img/main_window_info_3.png" />
            <p align="center">圖(3)</p>
            <ul>
                <li>A、畫布：顯示結果、滑鼠點擊輸入的地方。
                    <br/>
                    <span style="color: red;">未讀入任何檔案且未按下Start、Step By Step 時</span>
                    ，可以以
                    <span style="color: red;">滑鼠左鍵</span>
                    點擊畫布輸入資料；
                    <span style="color: red;">按下 Start或者Step By Step 後，畫布禁止再點擊</span>
                    。
                    <span style="color: red;">若選擇讀檔，則時畫布禁止輸入</span>。
                    <ul>
                        圖(1)
                        <li>
                            <span style="color: green">綠色線條</span>：表示左右的Convex Hull。</li>
                        <li>
                            <span style="color: blue">藍色線條</span>：表示 Convex Hull 的上下公切線。</li>
                        圖(2)
                        <li>
                            <span style="color: orange">橘色</span>選擇的切線</li>
                        <li>
                            <span style="color: purple">紫色</span>左右兩邊圖形的中垂線</li>
                        <li>
                            <span style="color: yellow">黃色</span>：表示HyperPlane的圖形。</li>
                        圖(3)
                        <li>
                            <span style="color: yellow">黃色</span>：處理完畢後以黃色顯示結果。</li>
                    </ul>
                </li>
                <br/>
                <li>B、Run 按鈕：開始執行至所有點皆處理完畢。
                    <br/> 當
                    <span style="color: red;">讀取測試資料檔</span>或
                    <span style="color: red;">畫布上至少有一筆資料</span>時，可以點擊 Run 執行並顯示結果。
                    <br/> 若資料是
                    <span style="color: red;">以讀取測試資料檔的方式輸入</span>時，則
                    <span style="color: red;">必須先按Next鍵</span>，讀取每筆測資。
                    <br/> 若先以Step by Step 執行，可在任一階段執行 Run 功能。
                </li>
                <br/>
                <li>C、Step By Step 按鈕：顯示每次Merge前、Merge後的狀況及合併後的 Convex Hull。
                    <br/> 當
                    <span style="color: red;">讀取測試資料檔</span>
                    或
                    <span style="color: red;">畫布上至少有一筆資料</span>
                    時，點擊 Step By Step 可以看到每次 Merge 前後的狀況。
                    <br/> 第一次按下暫停在找出左右邊的圖形，第二次按下則暫停找出上下切線， 第三次則是找出左有兩圖形Merge的HyperPlane圖形，第四次則是以黃色現在畫布顯示最後圖形。
                    <br/> 若資料是
                    <span style="color: red;">以讀檔方式輸入，必須先按下Next按鍵</span>
                    ，把點先畫於畫布上，才可以按下 Step By Step。
                </li>
                <br/>
                <li>D、Next 按鈕：當資料以
                    <span style="color: red;">讀檔方式輸入( Open File 按鍵)</span>時，Next 按鈕會以阿拉伯數字 顯示讀入的測資個數。當按鈕顯示為0時，會跳出訊息視窗提醒
                    <span style="color: red;">已無資料</span>。
                    <br/>按下確定後，Next 按鈕會消失。
                </li>
                <br/>
                <li>E、Clean 按鈕：可在任一時間點清除畫布上的內容。</li>
                <br/>
                <li>F、Open Output File 按鈕：可以
                    <span style="color: red;">開啟 Output File的檔案格式</span>，並顯示於畫布。
                    <br/>
                    <span style="color: red;">(註) : 目前無做防呆判斷，若開啟格式不支援，軟體會崩潰</span>。
                </li>
                <br/>
                <li>G、Open File 按鈕：讀取
                    <span style="color: red;">測試資料檔</span>。

                    <br/> 註：以此方式輸入資料時，必須先
                    <span style="color: red;">按 Next 按鍵</span>
                    將點顯示於畫布，才可以請點擊 Start 或 Step By Step。
                    <br/>每筆測資結束後，可再按 Next 顯示下一筆資料。執行過程中，可隨時切換測資。
                </li>
                <br/>
                <li>H、Output File 按鈕：讀取
                    <br/> 當畫布上的資料只以黃色線呈現時，代表此測資完成，此時可點擊 Output File，將會跳出提醒視窗，顯示
                    <span style="color: red;">完成輸出txt</span>
                    ，檔名預設為
                    <span style="color: red;">OutputFile</span>。
                    <br/>
                    <span style="color: red;">(註) : 檔案會複寫，若要存存每筆測資的結果，需另外存檔。</span>
                </li>
                <br/>
                <li>I、座標顯示欄 :　鼠標在畫布內移動，會將座標值顯示於此。</li>
                <br/>
            </ul>
        </div>
        <div>
            <h2 style="color: red;">軟體測試規劃書</h2>
            <a href="軟體測試規格書.doc">軟體測試規劃書
                <a>
        </div>
    </div>
    <hr/>
    <h1 style="color: red;">軟體說明</h1>
    <p>解壓縮 voronoi-release.zip 後以滑鼠左鍵雙擊 Voronoi.exe 即可使用。</p>
    <hr/>
    <h1 style="color: red;">程式設計</h1>
    <p>大致上都與課本描述的演算法相同，由於需要將輸入的點排序(輸出檔案時)，且點需要關聯到邊(方便演算法的實現)，故需另外寫出存放點的結構。此外，由於演算法大多在線的運算，故需實現可以存放線的資料結構，主要存放方程式與兩個端點，與生成這條線的兩個資料點(方便演算法實現)。主要還是以陣列儲存點和線，並以指標達到點與線相互關聯的效果。
        <br/>
        <ul>
            <li>分割：找出所有點的X座標，若任兩點X座標相同則只取一個，之後找中位數，若為找到的X座標數量為偶數則取中位數為切割線，奇數則取中位數與中位數的下一個數的平均值(為了正確的將點分開)為切割線，若所有點x軸相同則視為例外(避免四點以上垂直共線的情形)。</li>
            <br/>
            <li>合併：由於此演算法的Conquer不做任何事，所以直接講合併。
                <ul>
                    <li>若只有兩個點則直接合併(只有一條中垂線)</li>
                    <br/>
                    <li>找出上下公切線：以上公切線為例，取左邊Convex Hull的最右邊的點與右邊Convex Hull最左邊的點，接下來從左邊的Convex Hull以逆時鐘方向旋轉判斷是否有在現在所選的兩個點上方的點，若有則替換左邊Convex
                        Hull選擇的點，若無則換右邊的Convex Hull以順時鐘的方向尋找是否有點在上方，找完後在回到左邊找，直到沒有變化為止。可以使用不等式或透過數學向量外積判斷點是否在上方。</li>
                    <br/>
                    <li>HyperPlane：先產生一條現在所選左右兩點所產生的線，之後從左右兩邊到的點所關聯的線找出第一條切到的線，並取產生這條線的令一個點當作下一個選中的點，之後循環直到所選兩點為下公切線左右兩點為止</li>
                    <br/>
                    <li>丟棄不必要的邊：產生HyperPlane時，若線有被中重線切割，則會放入待處理的陣列，並將該HyperPlane紀錄下來，之後以該HyperPlane的斜率判斷線的哪邊需要切掉。</li>
                    <br/>
                    <li>Convex Hull:最後以找到的上下公切線將左右兩邊的Convex Hull合併。</li>
                </ul>
            </li>
            <br/>
        </ul>
    </p>
    <hr/>
    <h1 style="color: red;">軟體測試與實驗結果</h1>
    <h2 style="color: red;">測試環境</h2>
    <ul>
        <li>硬體配備：
            <ul>
                <li>CPU：Intel Core I7-7700</li>
                <li>記憶體：DDR4 8G</li>
            </ul>
        </li>
        <br/>
        <li>作業系統 : window 10</li>
        <br/>
        <li>IDE : Visual Stido 2017</li>
        <br/>
        <li>開發語言 : C#</li>
        <br/>
    </ul>
    <h2 style="color: red;">實驗結果</h2>
    <p>目前程式僅能執行4個點，在第一階段時，以為只需點結構即可以，在多點 測試便陷入資料結構混亂的問題，因此為實作出4點以上的Voroni必須在新增更多資料結構以儲存必須的資料，所以第二階段一開始便花去大量得時間修改程式資料結構、程式結構以及程式操作邏輯等問題，便壓縮了實作核心算法的時間，
        目前問題是Hyperplan無法正確找到最先接近的中垂段的交點，所以在merge時便出錯。
    </p>
    <ul class="archive_year">
        <li class="years">2個點
            <ul class="archive_month">
                <li class="months">2-1
                    <ul class="archive_posts">
                        <img src="img/2/2.png" />
                    </ul>
                </li>
            </ul>
        </li>
        <li class="years">3個點
            <ul class="archive_month">
                <li class="months">3點共線
                    <ul class="archive_posts">
                        <img src="img/3/3-1.png" />
                        <img src="img/3/3-2.png" />
                        <img src="img/3/3-3.png" />
                        <img src="img/3/3-4.png" />
                    </ul>
                </li>
                <li class="months">直角三角形
                    <ul class="archive_posts">
                        <img src="img/3/3-5.png" />
                    </ul>
                </li>
                <li class="months">銳角三角形
                    <ul class="archive_posts">
                        <img src="img/3/3-6.png" />
                    </ul>
                </li>
                <li class="months">鈍角三角形
                    <ul class="archive_posts">
                        <img src="img/3/3-7.png" />
                    </ul>
                </li>
            </ul>
        </li>
        <li class="years">4個點
            <ul class="archive_month">
                <li class="months">正方形
                    <ul class="archive_posts">
                        <img src="img/4/4-1.png" />
                    </ul>
                </li>
                <li class="months">菱形
                    <ul class="archive_posts">
                        <img src="img/4/4-2.png" />
                    </ul>
                </li>
                <li class="months">3點包1內點
                    <ul class="archive_posts">
                        <img src="img/4/4-3.png" />
                    </ul>
                </li>
                <li class="months">3點共線
                    <ul class="archive_posts">
                        <img src="img/4/4-4.png" />
                        <img src="img/4/4-5.png" />
                    </ul>
                </li>
            </ul>
        </li>
    </ul>

    <hr/>
    <h1 style="color: red;" id>結論與心得</h1>
    <p>這是一份充滿酸甜的作業，透過實作過程，補充了許多數學知識，當然為了以divde-and-conquer更需充分了解算法，解決選擇下一個點與換線方式，但作業有期限加上自身程式觀念不足，在時間上的把握並不好，導致到了demo日期，程式也只能夠執行４個點的圖形。
    </p>
    <br/>
    <p>這份作業真的花了我許多時間，從一開始就聽學長說這份作業不太好寫，可以提早動工，到老師公布作業，學長大概提早提醒我們有１個多月吧，但當時心有餘而力不足，其他課的作業真的很多，等到了只剩下一個禮拜就到第一階段的demo時間，那時不時覺得連呼吸都累，
        也因此失去思考和設計voromoi資料結構的時間，草草動工。為什麼clean code可以寫成一本書？其中便是極其重要的告訴讀者(coder)，乾淨明了的程式碼是多麼重要，但自己卻只是為功能而編寫程式碼，也以自己熟悉的Ｃ＃作為作業程式語言。另外本也想為專案寫
        一些測試專案作為日後的debug用，不過很失望自己未能達成，一切都是自己懶，當自己完成第一階段的程式後，仍未意識到程式的問題性，缺乏穩定、修改、擴充，這些問題一直到了要交第二次作業時才慢慢浮現，編寫邊問號自己，周邊的旋律總是周杰倫的半島鐵盒的那句
        歌詞，怎麼這樣子～程式整體缺少了非常多的必要資訊，例如點應要以何種方式排列，我的線段程式如何知道線段哪一頭為相對上，下，左，右呢？為此我幾乎重新寫了第一次的作業，我修改了全部第一次使用到的資料結構，不過嚴格說第一次算暴力方式去解決問題，
        根本不需要資料結構的問題，我想這就是我第二次作業無法順利完成的原因吧，最後希望自己能更擅於安排時間，為思考更多作業的算法與結構。
    </p>

    <hr/>
    <h1 style="color: red;">附錄</h1>
    <h3>
        <a href="M043040023_合併檔.txt">程式原始碼合併檔</a>
        <span style="color: red;">註：編碼為utf8</span>
    </h3>
    <p></p>
    <h3>
        <a href="test/test.in">測試輸入檔</a>
    </h3>
    <h3>
        <a href="test/test.save">測試輸出檔</a>
    </h3>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script type="text/javascript">
    $('.archive_month ul').hide();
    $('.months').click(function () {
        $(this).find('ul').slideToggle();
    });
</script>

</html>